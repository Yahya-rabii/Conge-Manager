<form (ngSubmit)="search()" class="max-w-xl mx-auto mt-10">
  <div class="relative">
    <input
      type="search"
      [(ngModel)]="ns"
      name="ns"
      placeholder="Rechercher un employé par NS..."
      class="block w-full p-4 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"
      required
    />
    <button type="submit" class="absolute end-2.5 bottom-2.5 bg-blue-700 text-white font-medium rounded-lg text-sm px-4 py-2">
      Rechercher
    </button>
  </div>
</form>

<div *ngIf="agent" class="max-w-3xl mx-auto mt-10 p-6 bg-white border border-gray-200 rounded-lg dark:bg-gray-800 dark:border-gray-700">
  <h2 class="text-xl font-semibold mb-4 text-gray-800 dark:text-white">Détails de l'employé</h2>

  <div class="grid md:grid-cols-2 gap-4 text-sm text-gray-700 dark:text-gray-300">
    <p><strong>Nom :</strong> {{ agent.NOM }} {{ agent.PRENOM }}</p>
    <p><strong>NS :</strong> {{ agent.NS }}</p>
    <p><strong>NCIN :</strong> {{ agent.NCIN }}</p>
    <p><strong>Cadre :</strong> {{ agent.CADRE }}</p>
    <p><strong>Grade :</strong> {{ agent.GRADE }}</p>
    <p><strong>Fonction :</strong> {{ agent.FONCTION }}</p>
    <p><strong>Solde (Actuel) :</strong> {{ agent.SOLDE }}</p>
  </div>

  <div class="mt-6 grid md:grid-cols-2 gap-4">
    <mat-form-field appearance="fill">
      <mat-label>De</mat-label>
      <input matInput [matDatepicker]="pickerFrom" [(ngModel)]="from" (dateChange)="calculate()" name="from" required />
      <mat-datepicker-toggle matSuffix [for]="pickerFrom"></mat-datepicker-toggle>
      <mat-datepicker #pickerFrom></mat-datepicker>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>À</mat-label>
      <input matInput [matDatepicker]="pickerTo" [(ngModel)]="to" (dateChange)="calculate()" name="to" required />
      <mat-datepicker-toggle matSuffix [for]="pickerTo"></mat-datepicker-toggle>
      <mat-datepicker #pickerTo></mat-datepicker>
    </mat-form-field>
  </div>

  <p class="mt-4 text-sm text-gray-700 dark:text-gray-300"><strong>Durée :</strong> {{ duration }} jour(s)</p>

  <button
    class="mt-6 w-full bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg text-sm px-5 py-2.5 dark:bg-green-500 dark:hover:bg-green-600"
    (click)="submit()"
    [disabled]="duration === 0"
  >
    Soumettre la demande de congé
  </button>
</div>
